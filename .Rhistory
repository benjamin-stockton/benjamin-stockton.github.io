#| label: set-up
# install.packages("cmdstanr",
#                  repos = c("https://mc-stan.org/r-packages/",
#                            getOption("repos")))
library(cmdstanr)
# cmdstanr::install_cmdstan()
cmdstanr::cmdstan_version()
cmdstanr::cmdstan_path()
cmdstanr::check_cmdstan_toolchain()
#| label: load-data
library(dplyr)
library(ggplot2)
ncaaw_file <- file.path("Data", "NCAAW-freethrows-threes-2022-2023.csv")
ncaaw <- readr::read_csv(file = ncaaw_file)
#| label: fig-scatter
#| fig-cap: Scatter plot of the Total Wins by 3 pt Field Goal %. The OLS regression line is super-imposed in blue.
#| echo: false
ggplot(ncaaw, aes(FG3pct, W)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +
labs(title = "2022-23 NCAAW Wins by 3pt%",
subtitle = paste0("r = ", round(cor(ncaaw$W, ncaaw$FG3pct), 3)),
x = "3pt%",
y = "Wins") +
theme_bw()
fit_ml <- lm(W ~ FG3pct, data = ncaaw)
coef(fit_ml)
smry_ml <- summary(fit_ml)
smry_ml$sigma^2
#| label: non-info-comp-fit
#| output-location: fragment
#| warning: false
data_list <- list(
N = nrow(ncaaw),
y = ncaaw$W,
x = ncaaw$FG3pct
)
file <- file.path("non-informative-regression.stan")
non_inf_model <- cmdstan_model(file)
fit1 <- non_inf_model$sample(
data = data_list,
iter_warmup = 1000,
iter_sampling = 1000,
thin = 1,
refresh = 500,
chains = 2,
show_messages = TRUE,
show_exceptions = FALSE
)
#| label: non-info-comp-fit
#| output-location: fragment
#| warning: false
data_list <- list(
N = nrow(ncaaw),
y = ncaaw$W,
x = ncaaw$FG3pct
)
file <- file.path("non-informative-regression.stan")
non_inf_model <- cmdstan_model(file)
fit1 <- non_inf_model$sample(
data = data_list,
iter_warmup = 1000,
iter_sampling = 1000,
thin = 1,
refresh = 500,
chains = 2,
show_messages = TRUE,
# show_exceptions = FALSE
)
